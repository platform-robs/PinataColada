<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cotizar | Pi√±ata Colada</title>

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;900;950&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0b12;
      --card: rgba(255,255,255,.06);
      --card2: rgba(255,255,255,.04);
      --border: rgba(255,255,255,.12);
      --muted: rgba(255,255,255,.72);
      --muted2: rgba(255,255,255,.55);

      --pink:#ff4fa6;
      --yellow:#ffd54a;

      --radius: 22px;
      --ease: cubic-bezier(.2,.8,.2,1);
    }

    *{ box-sizing:border-box; }
    html,body{ margin:0; padding:0; background:var(--bg); color:#fff; font-family:"Montserrat",system-ui; }

    a{ color:inherit; text-decoration:none; }
    button,input,select,textarea{ font-family:inherit; }

    .container{
      width: min(980px, 92vw);
      margin: 0 auto;
    }

    /* HEADER SIMPLE */
    header{
      position: sticky;
      top:0;
      z-index:50;
      backdrop-filter: blur(14px);
      background: linear-gradient(to bottom, rgba(10,10,16,.78), rgba(10,10,16,.30));
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .nav{
      display:flex;
      align-items:center;
      justify-content: space-between;
      padding: 14px 0;
      gap: 14px;
    }
    .brand img{ height: 54px; width:auto; display:block; }

    .btn{
      border:0;
      cursor:pointer;
      font-weight: 900;
      letter-spacing: .2px;
      border-radius: 999px;
      padding: 12px 16px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      user-select:none;
      transition: transform .18s var(--ease), box-shadow .18s var(--ease), background .18s var(--ease);
      white-space: nowrap;
    }
    .btn:active{ transform: translateY(1px) scale(.99); }

    .btn-primary{
      background: linear-gradient(135deg, var(--pink), var(--yellow));
      color:#111;
      box-shadow: 0 18px 40px rgba(255,79,166,.18), 0 18px 40px rgba(255,213,74,.14);
    }
    .btn-ghost{
      background: rgba(255,255,255,.06);
      color:#fff;
      border: 1px solid rgba(255,255,255,.12);
    }

    /* HERO */
    .hero{
      padding: 26px 0 10px;
    }
    .hero-card{
      border-radius: 28px;
      padding: 20px;
      border: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(circle at 20% 10%, rgba(255,79,166,.18), transparent 55%),
        radial-gradient(circle at 85% 0%, rgba(255,213,74,.14), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: 0 25px 80px rgba(0,0,0,.55);
    }

    h1{
      margin:0;
      font-size: clamp(22px, 6vw, 34px);
      line-height:1.05;
      font-weight: 950;
      letter-spacing: -.7px;
    }
    .lead{
      margin: 10px 0 0;
      color: var(--muted);
      font-weight: 700;
      line-height:1.55;
      font-size: 14px;
    }

    .highlight{
      font-weight: 950;
      background: linear-gradient(135deg, var(--pink), var(--yellow));
      -webkit-background-clip:text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 10px rgba(255,79,166,.18);
    }

    /* FORM */
    .form-wrap{
      padding: 14px 0 40px;
    }

    .form-card{
      margin-top: 14px;
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      box-shadow: 0 18px 70px rgba(0,0,0,.55);
      overflow:hidden;
    }

    .form-head{
      padding: 16px 16px 12px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
    }

    .form-title{
      font-weight: 950;
      letter-spacing: -.3px;
      font-size: 16px;
      margin:0;
    }
    .form-sub{
      margin: 6px 0 0;
      color: rgba(255,255,255,.70);
      font-weight: 700;
      font-size: 13px;
      line-height: 1.45;
    }

    form{
      padding: 16px;
      display:grid;
      gap: 14px;
    }

    .field{
      display:grid;
      gap: 8px;
    }

    label{
      font-weight: 900;
      font-size: 12px;
      color: rgba(255,255,255,.80);
      letter-spacing: .2px;
      text-transform: lowercase;
    }

    input, select, textarea{
      width: 100%;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: #fff;
      padding: 14px 14px;
      font-weight: 800;
      outline: none;
      transition: border-color .18s var(--ease), transform .18s var(--ease), background .18s var(--ease);
    }

    textarea{ min-height: 120px; resize: vertical; }

    input:focus, select:focus, textarea:focus{
      border-color: rgba(255,213,74,.35);
      background: rgba(255,255,255,.08);
    }

    .two{
      display:grid;
      gap: 14px;
    }

    @media(min-width: 720px){
      .two{
        grid-template-columns: 1fr 1fr;
      }
    }

    .help{
      font-size: 12px;
      color: rgba(255,255,255,.55);
      font-weight: 700;
      line-height: 1.35;
    }

    .actions{
      display:grid;
      gap: 10px;
      margin-top: 4px;
    }

    .status{
      display:none;
      padding: 14px 14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      font-weight: 850;
      color: rgba(255,255,255,.88);
      line-height:1.45;
    }
    .status.show{ display:block; }

    .status.ok{
      border-color: rgba(46, 213, 115, .25);
      background: rgba(46, 213, 115, .06);
    }
    .status.bad{
      border-color: rgba(255, 71, 87, .25);
      background: rgba(255, 71, 87, .06);
    }

    /* NOTAS IMPORTANTES */
    .notes{
      margin-top: 16px;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      padding: 16px;
    }

    .notes h3{
      margin:0;
      font-weight: 950;
      font-size: 14px;
      letter-spacing: -.2px;
    }

    .notes ul{
      margin: 10px 0 0;
      padding-left: 18px;
      color: rgba(255,255,255,.72);
      font-weight: 750;
      line-height: 1.6;
      font-size: 13px;
    }

    /* LOADER */
    .spinner{
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 3px solid rgba(0,0,0,.18);
      border-top-color: rgba(0,0,0,.55);
      animation: spin .8s linear infinite;
    }
    @keyframes spin{ to{ transform: rotate(360deg); } }
  </style>
</head>

<body>

<header>
  <div class="container">
    <div class="nav">
      <a href="#" class="brand">
        <img src="assets/logo.png" alt="Pi√±ata Colada">
      </a>

      <a class="btn btn-ghost" href="tamanos.html">ver tama√±os</a>
    </div>
  </div>
</header>

<main>

  <section class="hero">
    <div class="container">
      <div class="hero-card">
        <h1>Haz tu <span class="highlight">cotizaci√≥n</span> ‚ú®</h1>
        <p class="lead">
          En menos de 1 minuto nos dejas tu idea y te respondemos con precio, tiempos y disponibilidad.
        </p>
      </div>
    </div>
  </section>

  <section class="form-wrap">
    <div class="container">

      <div class="form-card">
        <div class="form-head">
          <p class="form-title">datos para tu pi√±ata</p>
          <p class="form-sub">
            llena lo b√°sico y nosotros te guiamos en el resto. si no sabes algo, no pasa nada.
          </p>
        </div>

        <form id="formCotizacion" autocomplete="on">

          <div class="two">
            <div class="field">
              <label for="cliente">cliente</label>
              <input id="cliente" name="cliente" type="text" placeholder="tu nombre" required />
              <div class="help">se convertir√° a may√∫sculas autom√°ticamente.</div>
            </div>

            <div class="field">
              <label for="telefono">tel√©fono</label>
              <input id="telefono" name="telefono" type="tel" inputmode="numeric" placeholder="4491234567" required />
              <div class="help">10 d√≠gitos (m√©xico). sin espacios.</div>
            </div>
          </div>

          <div class="two">
            <div class="field">
              <label for="tamano">tama√±o</label>
              <select id="tamano" name="tamano" required>
                <option value="" selected disabled>elige un tama√±o</option>
                <option value="s - sutil">s - sutil</option>
                <option value="m - colada">m - colada</option>
                <option value="l - epica">l - epica</option>
                <option value="diseno a tu tematica">diseno a tu tematica</option>
              </select>
            </div>

            <div class="field">
              <label for="evento">evento (opcional)</label>
              <input id="evento" name="evento" type="text" placeholder="cumplea√±os, boda, baby shower..." />
            </div>
          </div>

          <div class="two">
            <div class="field">
              <label for="fechaEntrega">fecha de entrega</label>
              <input id="fechaEntrega" name="fechaEntrega" type="date" required />
              <div class="help">idealmente con varios d√≠as de anticipaci√≥n.</div>
            </div>

            <div class="field">
              <label for="entrega">entrega</label>
              <select id="entrega" name="entrega" required>
                <option value="" selected disabled>elige una opci√≥n</option>
                <option value="recoleccion">recoleccion</option>
                <option value="envio">envio</option>
              </select>
              <div class="help">si es env√≠o, depende de ubicaci√≥n.</div>
            </div>
          </div>

          <div class="field">
            <label for="ubicacion">ubicaci√≥n</label>
            <input id="ubicacion" name="ubicacion" type="text" placeholder="colonia, ciudad (ej: irapuato centro)" required />
            <div class="help">nos ayuda a confirmar si aplica entrega y costo.</div>
          </div>

          <div class="field">
            <label for="diseno">dise√±o</label>
            <input id="diseno" name="diseno" type="text" placeholder="ej: spiderman, hello kitty, one piece..." required />
          </div>

          <div class="field">
            <label for="detalles">detalles extra (opcional)</label>
            <textarea id="detalles" name="detalles" placeholder="colores, nombre, edad, si quieres 3d, referencias, etc..."></textarea>
          </div>

          <div class="field">
            <label for="metodoPago">m√©todo de pago</label>
            <select id="metodoPago" name="metodoPago" required>
              <option value="" selected disabled>elige m√©todo</option>
              <option value="efectivo">efectivo</option>
              <option value="transferencia">transferencia</option>
            </select>
          </div>

          <div class="status" id="statusBox"></div>

          <div class="actions">
            <button class="btn btn-primary" id="btnEnviar" type="submit">
              enviar cotizaci√≥n
            </button>
            <a class="btn btn-ghost" href="catalogo.html">ver cat√°logo</a>
          </div>

        </form>
      </div>

      <div class="notes">
        <h3>notas importantes</h3>
        <ul>
          <li>tu cotizaci√≥n se confirma por whatsapp una vez revisada.</li>
          <li>tiempo de dise√±o y elaboraci√≥n depende de la complejidad y disponibilidad.</li>
          <li>para apartar fecha se solicita <b>50% de anticipo</b>.</li>
          <li>el 50% restante se paga al entregar.</li>
          <li>entregas y env√≠os dependen de ubicaci√≥n (se confirma al cotizar).</li>
          <li>si necesitas una fecha muy cercana, se revisa disponibilidad primero.</li>
        </ul>
      </div>

    </div>
  </section>

</main>

<script>
  const WEBAPP_URL = "https://script.google.com/macros/s/AKfycbz4inSMWegGyet4EqqBWmWlzV9ZAu0Y-BPtS5ogpN9Mm8Y1Atc61GklU83OPvwqxlL4/exec";

  const form = document.getElementById("formCotizacion");
  const statusBox = document.getElementById("statusBox");
  const btnEnviar = document.getElementById("btnEnviar");

  const cliente = document.getElementById("cliente");
  const telefono = document.getElementById("telefono");

  // cliente a may√∫sculas
  cliente.addEventListener("input", () => {
    const pos = cliente.selectionStart;
    cliente.value = cliente.value.toUpperCase();
    cliente.setSelectionRange(pos, pos);
  });

  // tel√©fono solo n√∫meros
  telefono.addEventListener("input", () => {
    telefono.value = telefono.value.replace(/\D/g, "").slice(0, 10);
  });

  function showStatus(msg, ok = true) {
    statusBox.className = "status show " + (ok ? "ok" : "bad");
    statusBox.innerHTML = msg;
  }

  function setLoading(on) {
    if (on) {
      btnEnviar.disabled = true;
      btnEnviar.innerHTML = `<span class="spinner"></span> enviando...`;
    } else {
      btnEnviar.disabled = false;
      btnEnviar.innerHTML = `enviar cotizaci√≥n`;
    }
  }

  function isValidPhoneMX(phone) {
    const clean = String(phone).replace(/\D/g, "");
    return clean.length === 10;
  }

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const data = {
      cliente: document.getElementById("cliente").value.trim().toUpperCase(),
      telefono: document.getElementById("telefono").value.trim(),
      tamano: document.getElementById("tamano").value,
      diseno: document.getElementById("diseno").value.trim(),
      fechaEntrega: document.getElementById("fechaEntrega").value,
      evento: document.getElementById("evento").value.trim(),
      detalles: document.getElementById("detalles").value.trim(),
      metodoPago: document.getElementById("metodoPago").value,
      entrega: document.getElementById("entrega").value,
      ubicacion: document.getElementById("ubicacion").value.trim()
    };

    if (!isValidPhoneMX(data.telefono)) {
      showStatus("El tel√©fono debe tener 10 d√≠gitos (M√©xico).", false);
      return;
    }

    setLoading(true);
    showStatus("Enviando tu cotizaci√≥n‚Ä¶ ‚ú®", true);

    try {
      // Mandamos como FormData (lo m√°s compatible con Apps Script)
      const fd = new FormData();
      Object.entries(data).forEach(([k, v]) => fd.append(k, v));

      const resp = await fetch(WEBAPP_URL, {
        method: "POST",
        body: fd
      });

      const text = await resp.text();

      let json;
      try {
        json = JSON.parse(text);
      } catch (err) {
        throw new Error("Respuesta inv√°lida del servidor: " + text);
      }

      if (!json.ok) {
        throw new Error(json.error || "Error desconocido.");
      }

      setLoading(false);
      showStatus(`¬°Listo! üéâ Tu folio es <b>${json.folio}</b>. En breve te contactamos.`, true);
      form.reset();

    } catch (err) {
      console.error(err);
      setLoading(false);
      showStatus("Ocurri√≥ un error al enviar. Intenta otra vez o escr√≠benos por WhatsApp.", false);
    }
  });
</script>


</body>
</html>
