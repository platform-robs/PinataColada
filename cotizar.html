<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cotizar | Pi√±ata Colada</title>

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;900;950&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/styles.css">

  <!-- Estilos EXTRA SOLO para el formulario (no rompen tu CSS global) -->
  <style>
    /* ================================
       FORM - ESTILO PI√ëATA COLADA
       ================================ */

    .quote-wrap{
      padding: 22px 0 44px;
    }

    .quote-hero{
      margin-top: 12px;
      padding: 18px;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.08);
      background:
        radial-gradient(900px 300px at 10% 0%, rgba(255,79,166,.18), transparent 60%),
        radial-gradient(800px 300px at 90% 20%, rgba(255,230,0,.12), transparent 60%),
        rgba(255,255,255,.03);
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
      text-align: center;
    }

    .quote-hero h1{
      margin: 0 0 6px;
      font-size: clamp(26px, 5vw, 38px);
      font-weight: 950;
      letter-spacing: -0.02em;
    }

    .quote-hero p{
      margin: 0;
      color: rgba(255,255,255,.78);
      font-weight: 650;
      line-height: 1.6;
      font-size: 15px;
    }

    .quote-grid{
      display: grid;
      grid-template-columns: 1fr;
      gap: 14px;
      margin-top: 18px;
    }

    .quote-card{
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.09);
      background: rgba(255,255,255,.03);
      box-shadow: 0 18px 60px rgba(0,0,0,.25);
      overflow: hidden;
    }

    .quote-card-head{
      padding: 16px 16px 12px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      display: flex;
      gap: 10px;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .quote-badge{
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      font-weight: 900;
      color: rgba(255,255,255,.92);
      letter-spacing: .2px;
      font-size: 13px;
    }

    .quote-card-body{
      padding: 16px;
    }

    .form-grid{
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    .field{
      display: grid;
      gap: 7px;
    }

    .field label{
      font-weight: 900;
      color: rgba(255,255,255,.90);
      font-size: 13px;
      letter-spacing: .2px;
    }

    /* Inputs + Selects con estilo (sin blanco horrible) */
    .control{
      width: 100%;
      padding: 14px 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.20);
      color: rgba(255,255,255,.92);
      outline: none;
      font-family: 'Montserrat', sans-serif;
      font-weight: 700;
      font-size: 15px;
      transition: transform .12s ease, border-color .12s ease, box-shadow .12s ease;
    }

    .control:focus{
      border-color: rgba(255,79,166,.55);
      box-shadow: 0 0 0 4px rgba(255,79,166,.12);
      transform: translateY(-1px);
    }

    /* Select con flecha custom */
    select.control{
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      background-image:
        linear-gradient(45deg, transparent 50%, rgba(255,255,255,.85) 50%),
        linear-gradient(135deg, rgba(255,255,255,.85) 50%, transparent 50%);
      background-position:
        calc(100% - 22px) calc(50% - 3px),
        calc(100% - 16px) calc(50% - 3px);
      background-size: 6px 6px, 6px 6px;
      background-repeat: no-repeat;
      padding-right: 42px;
    }

    /* Opciones dentro del select */
    select.control option{
      background: #111;
      color: #fff;
      font-weight: 700;
    }

    textarea.control{
      min-height: 110px;
      resize: vertical;
    }

    .hint{
      font-size: 12px;
      color: rgba(255,255,255,.62);
      font-weight: 650;
      line-height: 1.45;
    }

    .row-2{
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    @media(min-width: 740px){
      .quote-grid{
        grid-template-columns: 1.2fr .8fr;
        align-items: start;
      }
      .row-2{
        grid-template-columns: 1fr 1fr;
      }
    }

    .notes{
      display: grid;
      gap: 10px;
      padding: 16px;
    }

    .note{
      padding: 14px 14px;
      border-radius: 18px;
      background: rgba(255,255,255,.03);
      border: 1px solid rgba(255,255,255,.08);
      color: rgba(255,255,255,.78);
      font-weight: 700;
      line-height: 1.55;
      font-size: 13px;
    }

    .note strong{
      color: rgba(255,255,255,.92);
    }

    .submit-area{
      display: grid;
      gap: 10px;
      padding-top: 4px;
    }

    .success{
      display: none;
      padding: 14px 14px;
      border-radius: 18px;
      background: rgba(50,255,150,.08);
      border: 1px solid rgba(50,255,150,.18);
      color: rgba(255,255,255,.92);
      font-weight: 800;
      line-height: 1.5;
      text-align: center;
    }

    .success.show{
      display: block;
      animation: pop .22s ease;
    }

    @keyframes pop{
      from{ transform: translateY(6px); opacity: 0; }
      to{ transform: translateY(0); opacity: 1; }
    }

    /* Bot√≥n m√°s largo y no gordo */
    #sendBtn{
      width: 100%;
      justify-content: center;
      padding: 14px 16px;
      border-radius: 18px;
      font-weight: 950;
      letter-spacing: .2px;
    }
  </style>
</head>

<body>

  <!-- HEADER -->
  <header>
    <div class="container">

      <div class="nav">
        <!-- Logo -->
        <a href="index.html" class="brand">
          <img class="brand-logo" src="assets/logo.png" alt="Pi√±ata Colada">
        </a>

        <!-- Links desktop -->
        <nav class="nav-links" aria-label="Secciones">
          <a href="tamanos.html">Tama√±os</a>
          <a href="catalogo.html">Cat√°logo</a>
          <a href="preguntas.html">Preguntas</a>
          <a href="cotizar.html">Cotizar</a>
        </nav>

        <!-- CTA -->
        <div class="nav-cta">

          <button class="btn btn-ghost" id="btnWhats" type="button">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path fill="#fff" d="M12 2a10 10 0 0 0-8.6 15.1L2 22l5-1.3A10 10 0 1 0 12 2Zm0 18a8 8 0 0 1-4.1-1.1l-.3-.2-2.9.8.8-2.8-.2-.3A8 8 0 1 1 12 20Zm4.6-5.7c-.2-.1-1.2-.6-1.4-.7-.2-.1-.4-.1-.6.1-.2.2-.7.7-.8.9-.1.2-.3.2-.5.1-.2-.1-1-.4-1.9-1.2-.7-.6-1.2-1.4-1.3-1.6-.1-.2 0-.4.1-.5l.4-.4c.1-.1.2-.3.3-.4.1-.1.1-.3 0-.5-.1-.1-.6-1.4-.8-1.9-.2-.5-.4-.4-.6-.4h-.5c-.2 0-.5.1-.7.4-.2.2-.9.9-.9 2.2s.9 2.5 1 2.7c.1.2 1.8 2.8 4.3 3.9.6.3 1.1.4 1.4.5.6.2 1.1.2 1.5.1.5-.1 1.2-.5 1.4-1 .2-.5.2-1 .1-1.1-.1-.1-.3-.2-.5-.3Z"/>
            </svg>
            WhatsApp
          </button>

          <button class="btn btn-primary" id="btnCotizarTop" type="button">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path fill="#111" d="M12 2l1.4 5.1L18.5 9l-5.1 1.4L12 15.5l-1.4-5.1L5.5 9l5.1-1.9L12 2Zm7 11l.9 3.2 3.1.8-3.1.9-.9 3.1-.9-3.1-3.1-.9 3.1-.8.9-3.2Z"/>
            </svg>
            Realizar cotizaci√≥n
          </button>

          <!-- Hamburguesa -->
          <button class="menu-btn" id="menuBtn" type="button" aria-label="Abrir men√∫">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M4 7h16v2H4V7Zm0 8h16v2H4v-2Zm0-4h16v2H4v-2Z"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Men√∫ m√≥vil -->
      <div class="mobile-nav" id="mobileNav" aria-label="Men√∫ m√≥vil">
        <div class="mobile-links">
          <a href="tamanos.html">Tama√±os <span>‚Üí</span></a>
          <a href="catalogo.html">Cat√°logo <span>‚Üí</span></a>
          <a href="preguntas.html">Preguntas <span>‚Üí</span></a>
          <a href="cotizar.html">Cotizar <span>‚Üí</span></a>
        </div>

        <div class="mobile-cta">
          <button class="btn btn-ghost" id="btnWhatsMobile" type="button">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path fill="#fff" d="M12 2a10 10 0 0 0-8.6 15.1L2 22l5-1.3A10 10 0 1 0 12 2Zm0 18a8 8 0 0 1-4.1-1.1l-.3-.2-2.9.8.8-2.8-.2-.3A8 8 0 1 1 12 20Zm4.6-5.7c-.2-.1-1.2-.6-1.4-.7-.2-.1-.4-.1-.6.1-.2.2-.7.7-.8.9-.1.2-.3.2-.5.1-.2-.1-1-.4-1.9-1.2-.7-.6-1.2-1.4-1.3-1.6-.1-.2 0-.4.1-.5l.4-.4c.1-.1.2-.3.3-.4.1-.1.1-.3 0-.5-.1-.1-.6-1.4-.8-1.9-.2-.5-.4-.4-.6-.4h-.5c-.2 0-.5.1-.7.4-.2.2-.9.9-.9 2.2s.9 2.5 1 2.7c.1.2 1.8 2.8 4.3 3.9.6.3 1.1.4 1.4.5.6.2 1.1.2 1.5.1.5-.1 1.2-.5 1.4-1 .2-.5.2-1 .1-1.1-.1-.1-.3-.2-.5-.3Z"/>
            </svg>
            WhatsApp
          </button>

          <button class="btn btn-primary" id="btnCotizarMobile" type="button">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path fill="#111" d="M12 2l1.4 5.1L18.5 9l-5.1 1.4L12 15.5l-1.4-5.1L5.5 9l5.1-1.9L12 2Zm7 11l.9 3.2 3.1.8-3.1.9-.9 3.1-.9-3.1-3.1-.9 3.1-.8.9-3.2Z"/>
            </svg>
            Cotizar ahora
          </button>
        </div>
      </div>

    </div>
  </header>

  <main>

    <section class="quote-wrap">
      <div class="container">

        <!-- Hero -->
        <div class="quote-hero">
          <h1>Cotiza tu pi√±ata ‚ú®</h1>
          <p>
            Te toma menos de 1 minuto.  
            <br>
            Cu√©ntanos tu idea y te respondemos con precio y tiempos.
          </p>
        </div>

        <div class="quote-grid">

          <!-- FORM -->
          <div class="quote-card">
            <div class="quote-card-head">
              <div class="quote-badge">üéâ Solicitud de cotizaci√≥n</div>
            </div>

            <div class="quote-card-body">

              <form id="quoteForm" autocomplete="on">

                <div class="form-grid">

                  <div class="field">
                    <label for="cliente">Nombre del cliente *</label>
                    <input class="control" id="cliente" name="cliente" type="text"
                      placeholder="Ej. SALVADOR GARC√çA"
                      minlength="3" maxlength="60"
                      required>
                  </div>

                  <div class="row-2">

                    <div class="field">
                      <label for="telefono">Tel√©fono (10 d√≠gitos) *</label>
                      <input class="control" id="telefono" name="telefono" type="tel"
                        placeholder="4491234567"
                        inputmode="numeric"
                        maxlength="10"
                        required>
                      <div class="hint">Solo n√∫meros. Ej: 4621234567</div>
                    </div>

                    <div class="field">
                      <label for="fechaEntrega">Fecha de entrega *</label>
                      <input class="control" id="fechaEntrega" name="fechaEntrega" type="date" required>
                      <div class="hint">Selecciona el d√≠a ideal para tenerla lista.</div>
                    </div>

                  </div>

                  <div class="row-2">

                    <div class="field">
                      <label for="tamano">Tama√±o *</label>
                      <select class="control" id="tamano" name="tamano" required>
                        <option value="" selected disabled>Selecciona una opci√≥n</option>
                        <option value="S - Sutil">S - Sutil</option>
                        <option value="M - Colada">M - Colada</option>
                        <option value="L - Epica">L - √âpica</option>
                        <option value="Diseno a tu tematica">Dise√±o a tu tem√°tica</option>
                      </select>
                      <div class="hint">Todos los tama√±os son personalizados ‚ú®</div>
                    </div>

                    <div class="field">
                      <label for="evento">Evento</label>
                      <input class="control" id="evento" name="evento" type="text"
                        placeholder="Cumplea√±os, boda, baby shower..."
                        maxlength="40">
                      <div class="hint">Opcional, pero ayuda a sugerir detalles.</div>
                    </div>

                  </div>

                  <div class="field">
                    <label for="diseno">Dise√±o / tem√°tica *</label>
                    <input class="control" id="diseno" name="diseno" type="text"
                      placeholder="Ej. S√∫per h√©roe / Barbie / Boda..."
                      minlength="3" maxlength="80"
                      required>
                    <div class="hint">Escribe la idea principal o personaje.</div>
                  </div>

                  <div class="field">
                    <label for="detalles">Detalles importantes *</label>
                    <textarea class="control" id="detalles" name="detalles"
                      placeholder="Colores, nombre, edad, frases, referencias, estilo (tierno, elegante, 3D)..."
                      minlength="5" maxlength="500"
                      required></textarea>
                    <div class="hint">Mientras m√°s claro, m√°s r√°pido te cotizamos.</div>
                  </div>

                  <div class="row-2">

                    <div class="field">
                      <label for="metodoPago">M√©todo de pago *</label>
                      <select class="control" id="metodoPago" name="metodoPago" required>
                        <option value="" selected disabled>Selecciona una opci√≥n</option>
                        <option value="Efectivo">Efectivo</option>
                        <option value="Transferencia">Transferencia</option>
                      </select>
                      <div class="hint">Anticipo 50% para iniciar.</div>
                    </div>

                    <div class="field">
                      <label for="entrega">Entrega *</label>
                      <select class="control" id="entrega" name="entrega" required>
                        <option value="" selected disabled>Selecciona una opci√≥n</option>
                        <option value="Recolecci√≥n">Recolecci√≥n</option>
                        <option value="Env√≠o">Env√≠o</option>
                      </select>
                      <div class="hint">Si es env√≠o, revisamos cobertura.</div>
                    </div>

                  </div>

                  <div class="field">
                    <label for="ubicacion">Ubicaci√≥n (para entrega) *</label>
                    <input class="control" id="ubicacion" name="ubicacion" type="text"
                      placeholder="Ej. Irapuato centro / Villas / Salamanca..."
                      minlength="3" maxlength="80"
                      required>
                    <div class="hint">Nos ayuda a confirmar si aplica env√≠o.</div>
                  </div>

                  <div class="submit-area">
                    <button class="btn btn-primary" id="sendBtn" type="submit">
                      Enviar solicitud
                    </button>

                    <div class="success" id="successMsg"></div>

                    <div class="hint" style="text-align:center;">
                      Si tu idea es muy espec√≠fica, puedes mandar referencias por WhatsApp.
                    </div>
                  </div>

                </div>
              </form>

            </div>
          </div>

          <!-- NOTAS -->
          <div class="quote-card">
            <div class="quote-card-head">
              <div class="quote-badge">üìù Importante</div>
            </div>

            <div class="notes">
              <div class="note">
                <strong>‚è≥ Tiempo de elaboraci√≥n:</strong><br>
                depende del tama√±o y complejidad. Recomendamos pedir con anticipaci√≥n.
              </div>

              <div class="note">
                <strong>üí≥ Pago:</strong><br>
                50% de anticipo para iniciar y 50% al entregar.
              </div>

              <div class="note">
                <strong>üì¶ Entregas:</strong><br>
                Recolecci√≥n o env√≠o (seg√∫n zona). Confirmamos cobertura antes.
              </div>

              <div class="note">
                <strong>üé® Personalizaci√≥n:</strong><br>
                Todas las pi√±atas son hechas a tu tem√°tica.  
                Solo dinos tu idea y la volvemos realidad ‚ú®
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

  </main>

  <!-- FOOTER + MODAL -->
  <footer class="site-footer">
    <div class="container">
      <div class="footer-grid">

        <div class="footer-col">
          <div class="footer-title">Pi√±ata Colada</div>
          <div class="footer-subtitle">Pi√±atas personalizadas ‚Ä¢ Irapuato, Gto</div>

          <div class="footer-socials">
            <a class="social-btn" href="#" target="_blank" rel="noopener" aria-label="Facebook">
              <svg viewBox="0 0 24 24"><path d="M22 12.07C22 6.48 17.52 2 11.93 2S1.86 6.48 1.86 12.07c0 5.03 3.66 9.2 8.44 9.93v-7.03H7.76v-2.9h2.54V9.85c0-2.5 1.49-3.88 3.77-3.88 1.09 0 2.23.2 2.23.2v2.46h-1.26c-1.24 0-1.63.77-1.63 1.56v1.88h2.77l-.44 2.9h-2.33V22c4.78-.73 8.44-4.9 8.44-9.93Z"/></svg>
            </a>
            <a class="social-btn" href="#" target="_blank" rel="noopener" aria-label="Instagram">
              <svg viewBox="0 0 24 24"><path d="M7.5 2h9A5.5 5.5 0 0 1 22 7.5v9A5.5 5.5 0 0 1 16.5 22h-9A5.5 5.5 0 0 1 2 16.5v-9A5.5 5.5 0 0 1 7.5 2Zm0 2A3.5 3.5 0 0 0 4 7.5v9A3.5 3.5 0 0 0 7.5 20h9a3.5 3.5 0 0 0 3.5-3.5v-9A3.5 3.5 0 0 0 16.5 4h-9Z"/><path d="M12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10Zm0 2a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z"/><path d="M17.5 6.4a1.1 1.1 0 1 1 0 2.2 1.1 1.1 0 0 1 0-2.2Z"/></svg>
            </a>
            <a class="social-btn" href="#" target="_blank" rel="noopener" aria-label="TikTok">
              <svg viewBox="0 0 24 24"><path d="M16.5 2h-2.9v13.2c0 1.6-1.3 2.8-2.8 2.8-1.6 0-2.8-1.3-2.8-2.8s1.3-2.8 2.8-2.8c.4 0 .8.1 1.1.2V9.1c-.4-.1-.8-.1-1.1-.1-3 0-5.4 2.4-5.4 5.4S7.8 20 10.8 20s5.4-2.4 5.4-5.4V7.7c1.1 1.2 2.6 2 4.3 2.2V7.1c-2.1-.3-3.7-2-4-4.1Z"/></svg>
            </a>
          </div>

          <div class="footer-copy">
            ¬© <span id="year"></span> Pi√±ata Colada. Todos los derechos reservados.
          </div>
        </div>

        <div class="footer-col footer-legal">
          <div class="footer-title-sm">Legal</div>

          <div class="footer-links">
            <button class="footer-link" id="btnTerms" type="button">
              <svg class="link-ico" viewBox="0 0 24 24"><path d="M6 2h9l5 5v15a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2Zm8 1.5V8h4.5L14 3.5ZM8 12h8v2H8v-2Zm0 4h8v2H8v-2Z"/></svg>
              <span>T√©rminos y condiciones</span>
            </button>

            <button class="footer-link" id="btnPrivacy" type="button">
              <svg class="link-ico" viewBox="0 0 24 24"><path d="M12 2a5 5 0 0 0-5 5v3H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2h-1V7a5 5 0 0 0-5-5Zm-3 8V7a3 3 0 1 1 6 0v3H9Z"/></svg>
              <span>Aviso de privacidad</span>
            </button>
          </div>
        </div>

      </div>
    </div>
  </footer>

  <div class="modal" id="modalLegal">
    <div class="modal-card" role="dialog" aria-modal="true">
      <div class="modal-head">
        <div>
          <h3 id="legalTitle">Legal</h3>
          <p id="legalSubtitle">Informaci√≥n importante.</p>
        </div>
        <button class="x" id="closeLegal" type="button">√ó</button>
      </div>
      <div style="padding:18px; color:rgba(255,255,255,.72); font-weight:650; line-height:1.7;">
        <div id="legalBody"></div>
      </div>
    </div>
  </div>

  <!-- ================================
       JS: MENU + FORM + VALIDACIONES
       ================================ -->
  <script>
    // ==========================================================
    // 1) MENU HAMBURGUESA
    // ==========================================================
    const menuBtn = document.getElementById("menuBtn");
    const mobileNav = document.getElementById("mobileNav");

    if(menuBtn && mobileNav){
      menuBtn.addEventListener("click", () => {
        mobileNav.classList.toggle("open");
      });

      mobileNav.querySelectorAll("a").forEach(a=>{
        a.addEventListener("click", ()=>{
          mobileNav.classList.remove("open");
        });
      });
    }

    // ==========================================================
    // 2) BOTONES WHATS
    // ==========================================================
    const WA_NUMBER = "5214495165882"; // +52 1 ...
    const WA_TEXT = encodeURIComponent("Hola! Quiero cotizar una pi√±ata ‚ú®");

    function openWhats(){
      window.open(`https://wa.me/${WA_NUMBER}?text=${WA_TEXT}`, "_blank");
    }

    const btnWhats = document.getElementById("btnWhats");
    const btnWhatsMobile = document.getElementById("btnWhatsMobile");

    if(btnWhats) btnWhats.addEventListener("click", openWhats);
    if(btnWhatsMobile) btnWhatsMobile.addEventListener("click", openWhats);

    // ==========================================================
    // 3) FORMULARIO (FETCH)
    // ==========================================================
    const APPS_SCRIPT_WEBAPP_URL =
      "https://script.google.com/macros/s/AKfycbwTA18Y4QApISRSPxkgxtlDY1871BgSbYAt1ecFihm9DXx_Sre0ixcS3qHy5L0lJCwy/exec";

    const quoteForm = document.getElementById("quoteForm");
    const successMsg = document.getElementById("successMsg");
    const submitBtn = document.getElementById("sendBtn");

    const cliente = document.getElementById("cliente");
    const telefono = document.getElementById("telefono");
    const fechaEntrega = document.getElementById("fechaEntrega");

    // Nombre en may√∫sculas
    if(cliente){
      cliente.addEventListener("input", () => {
        cliente.value = cliente.value.toUpperCase();
      });
    }

    // Tel√©fono: solo n√∫meros y max 10
    if(telefono){
      telefono.addEventListener("input", () => {
        telefono.value = telefono.value.replace(/\D/g, "").slice(0,10);
      });
    }

    // Fecha m√≠nima: ma√±ana (para evitar fechas imposibles)
    if(fechaEntrega){
      const today = new Date();
      today.setDate(today.getDate() + 1);
      const yyyy = today.getFullYear();
      const mm = String(today.getMonth()+1).padStart(2,"0");
      const dd = String(today.getDate()).padStart(2,"0");
      fechaEntrega.min = `${yyyy}-${mm}-${dd}`;
    }

    function isValidPhoneMX(phone){
      const clean = String(phone || "").replace(/\D/g,"");
      return clean.length === 10;
    }

    if(quoteForm){
      quoteForm.addEventListener("submit", async (e) => {
        e.preventDefault();

        if(successMsg) successMsg.classList.remove("show");

        const formData = new FormData(quoteForm);

        const payload = {
          cliente: (formData.get("cliente") || "").trim().toUpperCase(),
          telefono: (formData.get("telefono") || "").trim(),
          tamano: formData.get("tamano") || "",
          diseno: (formData.get("diseno") || "").trim(),
          fechaEntrega: formData.get("fechaEntrega") || "",
          evento: (formData.get("evento") || "").trim(),
          detalles: (formData.get("detalles") || "").trim(),
          metodoPago: formData.get("metodoPago") || "",
          entrega: formData.get("entrega") || "",
          ubicacion: (formData.get("ubicacion") || "").trim()
        };

        // Validaciones extra
        if(!payload.cliente || payload.cliente.length < 3){
          alert("‚ö†Ô∏è Escribe tu nombre completo.");
          return;
        }

        if(!isValidPhoneMX(payload.telefono)){
          alert("‚ö†Ô∏è El tel√©fono debe tener 10 d√≠gitos.");
          return;
        }

        if(!payload.tamano || !payload.diseno || !payload.fechaEntrega ||
           !payload.metodoPago || !payload.entrega || !payload.ubicacion || !payload.detalles){
          alert("‚ö†Ô∏è Completa todos los campos obligatorios.");
          return;
        }

        // UI bot√≥n
        if(submitBtn){
          submitBtn.disabled = true;
          submitBtn.style.opacity = ".7";
          submitBtn.textContent = "Enviando‚Ä¶";
        }

        try{
          const params = new URLSearchParams(payload);

          const res = await fetch(APPS_SCRIPT_WEBAPP_URL, {
            method: "POST",
            body: params
          });

          const text = await res.text();
          let data;

          try{
            data = JSON.parse(text);
          }catch(err){
            console.log("RAW:", text);
            throw new Error("El servidor no devolvi√≥ JSON v√°lido.");
          }

          if(!data.ok){
            throw new Error(data.error || "Error desconocido");
          }

          // √âxito
          if(successMsg){
            successMsg.innerHTML = `
              ‚úÖ ¬°Listo! Recibimos tu cotizaci√≥n.<br>
              <span style="opacity:.9">Tu folio es: <b>${data.folio}</b></span><br>
              <span style="opacity:.75">Te contactamos muy pronto.</span>
            `;
            successMsg.classList.add("show");
          }

          quoteForm.reset();

        }catch(err){
          alert("‚ùå No se pudo enviar tu cotizaci√≥n.\n\n" + err.message);
        }
        finally{
          if(submitBtn){
            submitBtn.disabled = false;
            submitBtn.style.opacity = "";
            submitBtn.textContent = "Enviar solicitud";
          }
        }
      });
    }

    // ==========================================================
    // 4) YEAR
    // ==========================================================
    const year = document.getElementById("year");
    if(year) year.textContent = new Date().getFullYear();
  </script>

  <script src="assets/js/main.js"></script>
</body>
</html>
